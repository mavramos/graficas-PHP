<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Graficas - PHP</title>
</head>
<body>
	<h1>Graficas con php</h1>
	<div id="grafica">

	</div>
	<script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
	<script type="text/javascript">
		"use strict";
		setTimeout(function(){
var http = new XMLHttpRequest();
		http.open('get','datos.php',true);
		http.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
		http.onreadystatechange = function() {
                if (this.readyState === 4){
                    var data = JSON.parse(this.responseText);
                    var datos = [].concat(data[0],data[1]);
                     console.log(datos);
                     var options = [];
                    var options = {
          series: datos,
          chart: {
          type: 'bar',
          height: 350
        },
        plotOptions: {
          bar: {
            horizontal: false,
            columnWidth: '55%',
            endingShape: 'rounded'
          },
        },
        dataLabels: {
          enabled: false
        },
        stroke: {
          show: true,
          width: 2,
          colors: ['transparent']
        },
        xaxis: {
          categories: data[2],
        },
        yaxis: {
          title: {
            text: 'Tabla de ingresos y gastos'
          }
        },
        fill: {
          opacity: 1,
          colors: ['#3235BD', '#DB00DE']
        },
        tooltip: {
          y: {
            formatter: function (val) {
              return "$" + val + " pesos MX"
            }
          }
        }
        };

        var chart = new ApexCharts(document.querySelector('#grafica'), options);
        chart.render();
                }
            };
         http.send();
         console.log('Ejecutando');
         window.setInterval(function () {
        getNewSeries(lastDate, {
          min: 10,
          max: 90
        })

        chart.updateSeries([{
          data: data
        }])
      }, 1000)
		},2000);


	</script>
</body>
</html>